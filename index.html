Voici un script HTML/JS complet correspondant à tes spécifications :

<!DOCTYPE html> <html lang="fr"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Formulaire Invités</title> <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script> <style> body { font-family: Arial, sans-serif; margin: 20px; } label { display: block; margin-top: 10px; } input, select { width: 300px; padding: 5px; margin-top: 5px; } button { margin-top: 20px; padding: 10px 20px; } </style> </head> <body> <h2>Formulaire d'invités</h2> <form id="inviteForm"> <label>Appartement / Bâtiment <input type="text" id="batiment" value="Bâtiment A, Appartement 101" readonly> </label> <label>Nombre d'invités <select id="nombreInvites" required> <option value="">Sélectionner</option> <option value="1">1</option> <option value="2">2</option> <option value="3">3</option> <option value="4">4</option> </select> </label> <div id="invitesContainer"> <label>Nom et Prénom <input type="text" class="nomPrenom" placeholder="Ex: Dupont Jean" required> </label> <label>Passeport / Carte nationale <input type="text" class="identite" placeholder="Numéro d'identité" required> </label> <label>Chambre <input type="text" class="chambre" placeholder="Chambre assignée" required> </label> </div> <button type="submit">Enregistrer et Générer QR Code</button> </form> <canvas id="qrCodeCanvas" style="margin-top:20px;"></canvas> <script> const nombreInvitesSelect = document.getElementById('nombreInvites'); const invitesContainer = document.getElementById('invitesContainer'); nombreInvitesSelect.addEventListener('change', () => { const nombre = parseInt(nombreInvitesSelect.value); invitesContainer.innerHTML = ''; for(let i=0; i<nombre; i++){ invitesContainer.innerHTML += ` <label>Nom et Prénom <input type="text" class="nomPrenom" placeholder="Ex: Dupont Jean" required> </label> <label>Passeport / Carte nationale <input type="text" class="identite" placeholder="Numéro d'identité" required> </label> <label>Chambre <input type="text" class="chambre" placeholder="Chambre assignée" required> </label> `; } }); document.getElementById('inviteForm').addEventListener('submit', function(e){ e.preventDefault(); const batiment = document.getElementById('batiment').value; const nombre = parseInt(nombreInvitesSelect.value); const noms = Array.from(document.getElementsByClassName('nomPrenom')).map((input,i) => `${nombre} - ${input.value}`); const identites = Array.from(document.getElementsByClassName('identite')).map(input => input.value); const chambres = Array.from(document.getElementsByClassName('chambre')).map(input => input.value); const invites = noms.map((nom,i) => ({ nombre: nombre, nom_prenom: nom, type_identite: identites[i], chambre: chambres[i] })); const data = { appartement: batiment, invites: invites, autorisation: "invité enregistré" }; const qr = new QRious({ element: document.getElementById('qrCodeCanvas'), value: JSON.stringify(data), size: 250 }); }); </script> </body> </html> 